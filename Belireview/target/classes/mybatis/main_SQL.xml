<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC " - //mybatis.org//DTD Config 3.0//EN" " http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="main">

	<!-- 연관검색어 -->
	<select id="searchDramaRelation" resultType="hashmap" parameterType="string">
		SELECT
			DRAMA_NAME
		FROM
			DRAMA
		WHERE
			DRAMA_NAME LIKE '%'||#{searchValue}||'%'
	</select>
	
	<select id="searchMovieRelation" resultType="hashmap" parameterType="string">
		SELECT
			MOVIE_NAME
		FROM
			MOVIE
		WHERE
			MOVIE_NAME LIKE '%'||#{searchValue}||'%'
	</select>
	
	<select id="searchAdRelation" resultType="hashmap" parameterType="string">
		SELECT
			AD_NAME
		FROM
			AD
		WHERE
			AD_NAME LIKE '%'||#{searchValue}||'%'
	</select>
	
	<select resultType="hashmap" id="dramaListTop8">
		<![CDATA[ SELECT DRAMA_NO, DRAMA_NAME, DRAMA_DATE, DRAMA_CHANNEL, DRAMA_GENRE, DRAMA_DIRECTOR, DRAMA_CONTENT, DRAMA_READCOUNT, DRAMA_POSTER_IMAGE, DRAMA_MAIN_IMAGE, DRAMA_CONTENT_IMAGE, DRAMA_EPISODE, DRAMA_GRADE, r FROM (SELECT DRAMA_NO, DRAMA_NAME, DRAMA_DATE, DRAMA_CHANNEL, DRAMA_GENRE, DRAMA_DIRECTOR, DRAMA_CONTENT, DRAMA_READCOUNT, DRAMA_POSTER_IMAGE, DRAMA_MAIN_IMAGE, DRAMA_CONTENT_IMAGE, DRAMA_EPISODE, DRAMA_GRADE, ROWNUM r FROM DRAMA ORDER BY DRAMA_READCOUNT DESC ) WHERE r >= 1 AND r <= 8 ]]>
	</select> 
	
	<select resultType="hashmap" id="movieListTop8">
		<![CDATA[ SELECT MOVIE_NO, MOVIE_NAME, MOVIE_DATE, MOVIE_COUNTRY, MOVIE_GENRE, MOVIE_TOTAL_COUNT, MOVIE_DIRECTOR, MOVIE_CONTENT, MOVIE_RUNNINGTIME, MOVIE_READCOUNT, MOVIE_POSTER_IMAGE, MOVIE_MAIN_IMAGE, MOVIE_GALLERY_IMAGE, MOVIE_GRADE, r FROM (SELECT MOVIE_NO, MOVIE_NAME, MOVIE_DATE, MOVIE_COUNTRY, MOVIE_GENRE, MOVIE_TOTAL_COUNT, MOVIE_DIRECTOR, MOVIE_CONTENT, MOVIE_RUNNINGTIME, MOVIE_READCOUNT, MOVIE_POSTER_IMAGE, MOVIE_MAIN_IMAGE, MOVIE_GALLERY_IMAGE, MOVIE_GRADE, ROWNUM r FROM MOVIE ORDER BY MOVIE_READCOUNT DESC ) WHERE r >=1 and r <= 8 ]]>
	</select>
	
	
	<select resultType="hashmap" id="adListTop8">
		<![CDATA[ SELECT AD_NO, AD_NAME, AD_LINK, AD_CONTENT, AD_COMPANY, AD_READCOUNT, AD_POSTER_IMAGE, AD_MAIN_IMAGE, AD_CONTENT_IMAGE, AD_GRADE, r FROM (SELECT AD_NO, AD_NAME, AD_LINK, AD_CONTENT, AD_COMPANY, AD_READCOUNT, AD_POSTER_IMAGE, AD_MAIN_IMAGE, AD_CONTENT_IMAGE, AD_GRADE, ROWNUM r FROM AD ORDER BY AD_READCOUNT DESC ) WHERE r >= 1 and r <= 8 ]]>
	</select>
	
	<select id="selectMovieSerach" parameterType="hashmap" resultType="hashmap">
		
<![CDATA[ select
			MOVIE_NO,
			MOVIE_NAME,
			MOVIE_DATE,
			MOVIE_COUNTRY,
			MOVIE_GENRE,
			MOVIE_TOTAL_COUNT,
			MOVIE_DIRECTOR,
			MOVIE_CONTENT,
			MOVIE_RUNNINGTIME,
			MOVIE_READCOUNT,
			MOVIE_POSTER_IMAGE,
			MOVIE_MAIN_IMAGE,
			MOVIE_GALLERY_IMAGE,
			MOVIE_GRADE,
			RNUM from 
		  (select
				MOVIE_NO,
				MOVIE_NAME,
				to_char(MOVIE_DATE,'yyyy') as MOVIE_DATE,
				MOVIE_COUNTRY,
				MOVIE_GENRE,
				MOVIE_TOTAL_COUNT,
				MOVIE_DIRECTOR,
				MOVIE_CONTENT,
				MOVIE_RUNNINGTIME,
				MOVIE_READCOUNT,
				MOVIE_POSTER_IMAGE,
				MOVIE_MAIN_IMAGE,
				MOVIE_GALLERY_IMAGE,
				MOVIE_GRADE,
				ROWNUM RNUM from 
				(SELECT *
					FROM MOVIE WHERE MOVIE_NAME LIKE '%'||#{searchText}||'%' ORDER BY MOVIE_DATE DESC) ORDER BY RNUM ASC)WHERE RNUM BETWEEN 1 AND 10
		]]>

	</select>

	<select id="selectDramaSerach" parameterType="hashmap" resultType="hashmap">
 <![CDATA[ SELECT
 			DRAMA_NO,
			DRAMA_NAME,
			DRAMA_DATE,
			DRAMA_CHANNEL,
			DRAMA_GENRE,
			DRAMA_DIRECTOR,
			DRAMA_CONTENT,
			DRAMA_READCOUNT,
			DRAMA_POSTER_IMAGE,
			DRAMA_MAIN_IMAGE,
			DRAMA_CONTENT_IMAGE,
			DRAMA_EPISODE,
			DRAMA_GRADE,
			RNUM FROM 
			(
		SELECT
				DRAMA_NO,
				DRAMA_NAME,
				to_char(DRAMA_DATE,'yyyy') as DRAMA_DATE,
				DRAMA_CHANNEL,
				DRAMA_GENRE,
				DRAMA_DIRECTOR,
				DRAMA_CONTENT,
				DRAMA_READCOUNT,
				DRAMA_POSTER_IMAGE,
				DRAMA_MAIN_IMAGE,
				DRAMA_CONTENT_IMAGE,
				DRAMA_EPISODE,
				DRAMA_GRADE,
				ROWNUM RNUM FROM 
				(SELECT *
					FROM DRAMA WHERE DRAMA_NAME LIKE '%'||#{searchText}||'%' ORDER BY DRAMA_DATE DESC) ORDER BY RNUM ASC)WHERE RNUM BETWEEN 1 AND 10
		]]>

	</select>

	<select id="selectAdSerach" parameterType="hashmap" resultType="hashmap">
		 <![CDATA[
		SELECT
			AD_NO,
			AD_NAME,
			AD_LINK,
			AD_CONTENT,
			AD_COMPANY,
			AD_READCOUNT,
			AD_POSTER_IMAGE,
			AD_MAIN_IMAGE,
			AD_CONTENT_IMAGE,
			AD_GRADE,
			RNUM FROM
			(
			SELECT
				AD_NO,
				AD_NAME,
				AD_LINK,
				AD_CONTENT,
				AD_COMPANY,
				AD_READCOUNT,
				AD_POSTER_IMAGE,
				AD_MAIN_IMAGE,
				AD_CONTENT_IMAGE,
				AD_GRADE,
				ROWNUM RNUM FROM 
				(SELECT *
				FROM AD WHERE AD_NAME LIKE '%'||#{searchText}||'%' ORDER BY AD_READCOUNT DESC) ORDER BY RNUM ASC)WHERE RNUM BETWEEN 1 AND 10
		]]>
	</select>
</mapper>